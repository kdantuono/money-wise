name: Claude PR Review - Frontend Focus

on:
  pull_request:
    types: [opened, synchronize, ready_for_review]
    paths:
      - 'apps/web/**'
      - 'apps/mobile/**'
      - 'packages/types/**'

jobs:
  frontend-focused-review:
    runs-on: ubuntu-latest
    if: github.event.pull_request.draft == false
    permissions:
      contents: read
      pull-requests: write
      id-token: write
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 1

      - name: Frontend-Focused PR Review
        uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          track_progress: true

          prompt: |
            REPOSITORY: ${{ github.repository }}
            PR NUMBER: ${{ github.event.pull_request.number }}
            FRONTEND REVIEW FOCUS

            ## ðŸŽ¨ FRONTEND CODE REVIEW

            This PR contains frontend changes. Perform a comprehensive frontend-focused review:

            ### ðŸŽ¯ FRONTEND REVIEW AREAS

            1. **React/Next.js Best Practices**
               - Component composition and reusability
               - Hook usage (useState, useEffect, useContext)
               - Next.js 14 App Router patterns
               - Server/Client component boundaries
               - Proper data fetching strategies

            2. **User Experience (UX)**
               - Intuitive financial workflows
               - Form validation and error handling
               - Loading states and skeleton screens
               - Mobile-responsive design
               - Accessibility compliance (WCAG 2.1 AA)

            3. **Performance Optimization**
               - Bundle size impact
               - Image optimization
               - Code splitting implementation
               - Lazy loading strategies
               - Core Web Vitals considerations

            4. **Financial UI Patterns**
               - Currency formatting and display
               - Transaction list optimization
               - Chart and analytics visualization
               - Account balance presentation
               - Budget progress indicators

            5. **State Management**
               - Context provider usage
               - Local vs global state decisions
               - Data synchronization
               - Error state handling
               - Cache invalidation

            6. **API Integration**
               - Error handling and retry logic
               - Loading state management
               - Data transformation
               - Type safety with TypeScript
               - Optimistic updates

            ### ðŸ“± MOBILE-SPECIFIC (React Native)

            For mobile app changes:
            - Platform-specific implementations
            - Native module integration
            - Performance on mobile devices
            - Touch interactions and gestures
            - Offline functionality

            ### ðŸŽ¨ DESIGN SYSTEM COMPLIANCE

            Check adherence to MoneyWise design system:
            - Consistent component usage
            - Tailwind CSS utility patterns
            - Color scheme and theming
            - Typography consistency
            - Spacing and layout patterns

            ### â™¿ ACCESSIBILITY CHECKLIST

            - [ ] Semantic HTML usage
            - [ ] ARIA labels and roles
            - [ ] Keyboard navigation support
            - [ ] Screen reader compatibility
            - [ ] Color contrast ratios
            - [ ] Focus management
            - [ ] Alternative text for images

            ### âš¡ PERFORMANCE CHECKLIST

            - [ ] No unnecessary re-renders
            - [ ] Proper dependency arrays
            - [ ] Optimized images and assets
            - [ ] Efficient list rendering
            - [ ] Bundle size considerations
            - [ ] Web Vitals impact

            ### ðŸ’³ FINANCIAL UX STANDARDS

            - [ ] Clear transaction categorization
            - [ ] Intuitive budget management
            - [ ] Secure account linking flow
            - [ ] Responsive currency formatting
            - [ ] Clear error messages for financial operations

            ### ðŸ§ª TESTING REQUIREMENTS

            - [ ] Component unit tests
            - [ ] User interaction tests
            - [ ] Accessibility tests
            - [ ] Visual regression considerations
            - [ ] E2E test coverage for critical flows

            ### ðŸ“‹ REVIEW GUIDELINES

            **Inline Comments For:**
            - Component structure improvements
            - Performance optimizations
            - Accessibility issues
            - UX/UI suggestions
            - Security concerns in frontend

            **General Comments For:**
            - Overall architecture feedback
            - Design system compliance
            - User flow improvements
            - Performance impact assessment

            Focus on creating an exceptional user experience for MoneyWise users while maintaining high code quality and performance standards.

          claude_args: |
            --allowedTools "Read,Glob,Grep,Task,mcp__github_inline_comment__*,mcp__github_pr_comment__*"
